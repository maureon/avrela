<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Issue.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">avrela</a> &gt; <a href="index.source.html" class="el_package">es.ubu.lsi.avrela.apm.model</a> &gt; <span class="el_source">Issue.java</span></div><h1>Issue.java</h1><pre class="source lang-java linenums">package es.ubu.lsi.avrela.apm.model;

import java.time.ZonedDateTime;
import java.util.Collection;
import java.util.HashSet;
import java.util.List;
import java.util.Set;
import java.util.function.Predicate;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.EqualsAndHashCode;
import lombok.Getter;
import lombok.ToString;

/** Models a project issue. */
@AllArgsConstructor
@EqualsAndHashCode(onlyExplicitlyIncluded = true)
@ToString(onlyExplicitlyIncluded = true)
@Getter
@Builder
public class Issue {

  /** UUID. */
  @EqualsAndHashCode.Include
  @ToString.Include
  private String id;

  /** Name. */
  @ToString.Include
  private String name;

  private String body;

  /** Sprint. */
  private Sprint sprint;

  /** State. */
  @ToString.Include
  private IssueState state;

  /** Check whether description contains task list*/
  private Boolean hasTaskList;

  /** Story points. */
  private Integer storyPoints;

  /** Creation time. */
  private ZonedDateTime createdAt;

  /** Labels. */
  private List&lt;String&gt; labels;

  /** Comments. */
  private List&lt;Comment&gt; comments;

  /** Events. */
  private List&lt;IssueEvent&gt; events;

  /** Assignee. */
  private String assignee;

  /** Body has links. */
  private Boolean hasLink;

  /** Images. */
  private Boolean hasImages;

  public static Issue emptyIssue() {
<span class="nc" id="L69">    return Issue.builder()</span>
<span class="nc" id="L70">        .name(&quot;No issue to compare&quot;)</span>
<span class="nc" id="L71">        .labels(List.of(&quot;No labels to compare&quot;))</span>
<span class="nc" id="L72">        .state(null)</span>
<span class="nc" id="L73">        .build();</span>
  }

  public Long countByEventType(IssueEventType eventType) {
<span class="pc bpc" id="L77" title="1 of 2 branches missed.">    if (this.events == null ) {return 0L;};</span>
<span class="fc" id="L78">    return this.events.stream()</span>
<span class="pc bpc" id="L79" title="1 of 4 branches missed.">            .filter(event -&gt; event.getEventType() != null &amp;&amp; eventType.equals(event.getEventType()))</span>
<span class="fc" id="L80">            .count();</span>
  }

  public boolean isLabeled() {
<span class="pc bpc" id="L84" title="2 of 4 branches missed.">    return labels !=null &amp;&amp; labels.size() &gt; 0;</span>
  }

  public boolean isLabeledWithLabel(String arg) {
<span class="pc bpc" id="L88" title="2 of 4 branches missed.">    return isLabeled() &amp;&amp; labels.contains(arg);</span>
  }

  /**
   *
   * @return issue participants.
   */
  public Collection&lt;String&gt; getParticipants() {
<span class="fc" id="L96">    Set&lt;String&gt; result = new HashSet&lt;&gt;();</span>
<span class="fc" id="L97">    events.forEach(</span>
        event -&gt; {
<span class="fc bfc" id="L99" title="All 2 branches covered.">          if (!result.contains(event.getUser())){</span>
<span class="fc" id="L100">           result.add(event.getUser());</span>
          }
<span class="fc" id="L102">        }</span>
    );
<span class="fc" id="L104">    return result;</span>
  }

  /**
   * Count issue participants.
   * @return number of participants.
   */
  public Integer countParticipants(){
<span class="nc" id="L112">    return getParticipants().size();</span>
  }

  /**
   * Check whether issue participants is greater or equals to provided value.
   * @param participants
   * @return
   */
  public static Predicate&lt;Issue&gt; participantsGreaterThanOrEqual(Integer participants){
<span class="pc bpc" id="L121" title="3 of 6 branches missed.">    return p -&gt; (p.getParticipants() != null &amp;&amp; p.getParticipants().size() != 0 &amp;&amp; p.getParticipants().size() &gt;= participants);</span>
  }

  /**
   * Check whether issues description match.
   * @return comparison result.
   */
  public Boolean issueDescriptionMatch(Issue actualIssue){
<span class="fc" id="L129">  Boolean result = false;</span>
<span class="fc" id="L130">  result = this.hasImages.equals(actualIssue.getHasImages());</span>
<span class="pc bpc" id="L131" title="2 of 4 branches missed.">  result = result &amp;&amp; this.hasLink.equals(actualIssue.getHasLink());</span>
<span class="pc bpc" id="L132" title="1 of 4 branches missed.">  result = result &amp;&amp; this.hasTaskList.equals(actualIssue.getHasTaskList());</span>
<span class="fc" id="L133">  return result;</span>
  }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>